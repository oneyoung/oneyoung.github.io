<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  
  <title>归档 | Logic in Chaos</title>
  <meta name="author" content="oneyoung">
  
  <meta name="description" content="This is oneyoung&#39;s Blog">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

  
  <meta property="og:site_name" content="Logic in Chaos"/>

  <link rel="alternate" href="/atom.xml" title="Logic in Chaos" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <script src="/js/jquery.min.js"></script>
  
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-38653003-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>


</head>


<body>
  <div class="wrapper">
    <header id="header"><div class="title">
  <h1><a href="/">Logic in Chaos</a></h1>
  <p><a href="/">Finding way to program the life</a></p>
</div>
<nav class="nav">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
      <li><a href="/atom.xml">RSS</a></li>
    
      <li><a href="/about">About</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
    <div class="content">
<h2 class="archive-title">归档</h2>


  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <time datetime="2014-12-26T07:18:29.000Z"><a href="/2014/12/26/force-route-audio-stream-to-headphone/">2014-12-26</a></time>
    
    
  
    <h1 class="title"><a href="/2014/12/26/force-route-audio-stream-to-headphone/">[Android] Force route audio stream to wired headset</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p>I want to force route audio stream to headphone for some tests, no matter headset is on or off.</p>
<h4 id="api-has-been-deprecrated">API has been deprecrated</h4>
<p>Andoird&#39;s <code>AudioManager</code> has such API before, called <a href="http://developer.android.com/reference/android/media/AudioManager.html" target="_blank">setRouting</a> , but it has deprecated for quite a long time. Currently, the available APIs can&#39;t meet my demands.</p>
<blockquote>
<p><strong>public void setRouting (int mode, int routes, int mask)</strong> </br>
This method was deprecated in API level 4.
Do not set audio routing directly, use setSpeakerphoneOn(), setBluetoothScoOn() methods instead.</p>
</blockquote>
<h4 id="way-out-through-hacking">Way out through hacking</h4>
<p>But if we looks at the source code about andorid.media system, it still opens a door to archive this, needs some hacking.</p>
<h5 id="the-idea">The idea</h5>
<p>When wired headset is plugged, the audio stream will route to it. So if we look at how Andoird handle this event, we can follow the same way to implement force route.</p>
<h5 id="how-android-handle-these-audio-routing-">How Android handle these audio routing?</h5>
<p>The <code>AudioManager</code> is the public interface exposed to Android SDK, but the inversivle hand which do the most work is <code>AudioService</code> and <code>AudioSystem</code>.</p>
<p>In <code>AudioService</code>, I found such code to enable Bluetooth, note the <em>line 2</em> is the key to enable audio device.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre>    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title">makeA2dpSrcAvailable</span>(String address) {
        AudioSystem.setDeviceConnectionState(AudioSystem.DEVICE_IN_BLUETOOTH_A2DP,
                AudioSystem.DEVICE_STATE_AVAILABLE,
                address);
        mConnectedDevices.put( <span class="keyword">new</span> Integer(AudioSystem.DEVICE_IN_BLUETOOTH_A2DP),
                address);
    }
</pre></td></tr></table></figure>

<h5 id="the-hidden-api">The hidden API</h5>
<p>So look at the this API in <code>AudioSystem</code>, it&#39;s a native API, we don&#39;t care about too much detail here.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">native</span> <span class="keyword">int</span> <span class="title">setDeviceConnectionState</span>(<span class="keyword">int</span> device, <span class="keyword">int</span> state, String device_address);
</pre></td></tr></table></figure>

<p>Here is available INPUT/OUTPUT device defined in <code>AudioSystem</code>, corresponding to the first parameter (<code>int device</code>) in above API.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
</pre></td><td class="code"><pre>    <span class="comment">// output devices, be sure to update AudioManager.java also</span>
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_OUT_EARPIECE = <span class="number">0x1</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_OUT_SPEAKER = <span class="number">0x2</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_OUT_WIRED_HEADSET = <span class="number">0x4</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_OUT_WIRED_HEADPHONE = <span class="number">0x8</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_OUT_BLUETOOTH_SCO = <span class="number">0x10</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_OUT_BLUETOOTH_SCO_HEADSET = <span class="number">0x20</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_OUT_BLUETOOTH_SCO_CARKIT = <span class="number">0x40</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_OUT_BLUETOOTH_A2DP = <span class="number">0x80</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_OUT_BLUETOOTH_A2DP_HEADPHONES = <span class="number">0x100</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_OUT_BLUETOOTH_A2DP_SPEAKER = <span class="number">0x200</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_OUT_AUX_DIGITAL = <span class="number">0x400</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_OUT_HDMI = DEVICE_OUT_AUX_DIGITAL;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_OUT_ANLG_DOCK_HEADSET = <span class="number">0x800</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_OUT_DGTL_DOCK_HEADSET = <span class="number">0x1000</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_OUT_USB_ACCESSORY = <span class="number">0x2000</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_OUT_USB_DEVICE = <span class="number">0x4000</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_OUT_REMOTE_SUBMIX = <span class="number">0x8000</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_OUT_TELEPHONY_TX = <span class="number">0x10000</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_OUT_LINE = <span class="number">0x20000</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_OUT_HDMI_ARC = <span class="number">0x40000</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_OUT_SPDIF = <span class="number">0x80000</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_OUT_FM = <span class="number">0x100000</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_OUT_AUX_LINE = <span class="number">0x200000</span>;

    <span class="comment">// input devices</span>
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_IN_COMMUNICATION = DEVICE_BIT_IN | <span class="number">0x1</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_IN_AMBIENT = DEVICE_BIT_IN | <span class="number">0x2</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_IN_BUILTIN_MIC = DEVICE_BIT_IN | <span class="number">0x4</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_IN_BLUETOOTH_SCO_HEADSET = DEVICE_BIT_IN | <span class="number">0x8</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_IN_WIRED_HEADSET = DEVICE_BIT_IN | <span class="number">0x10</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_IN_AUX_DIGITAL = DEVICE_BIT_IN | <span class="number">0x20</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_IN_HDMI = DEVICE_IN_AUX_DIGITAL;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_IN_VOICE_CALL = DEVICE_BIT_IN | <span class="number">0x40</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_IN_TELEPHONY_RX = DEVICE_IN_VOICE_CALL;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_IN_BACK_MIC = DEVICE_BIT_IN | <span class="number">0x80</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_IN_REMOTE_SUBMIX = DEVICE_BIT_IN | <span class="number">0x100</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_IN_ANLG_DOCK_HEADSET = DEVICE_BIT_IN | <span class="number">0x200</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_IN_DGTL_DOCK_HEADSET = DEVICE_BIT_IN | <span class="number">0x400</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_IN_USB_ACCESSORY = DEVICE_BIT_IN | <span class="number">0x800</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_IN_USB_DEVICE = DEVICE_BIT_IN | <span class="number">0x1000</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_IN_FM_TUNER = DEVICE_BIT_IN | <span class="number">0x2000</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_IN_TV_TUNER = DEVICE_BIT_IN | <span class="number">0x4000</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_IN_LINE = DEVICE_BIT_IN | <span class="number">0x8000</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_IN_SPDIF = DEVICE_BIT_IN | <span class="number">0x10000</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_IN_BLUETOOTH_A2DP = DEVICE_BIT_IN | <span class="number">0x20000</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_IN_LOOPBACK = DEVICE_BIT_IN | <span class="number">0x40000</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_IN_DEFAULT = DEVICE_BIT_IN | DEVICE_BIT_DEFAULT;
</pre></td></tr></table></figure>

<p>For the parameter <code>int state</code>, you can set it to (un)available.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre>    <span class="comment">// device states, must match AudioSystem::device_connection_state</span>
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_STATE_UNAVAILABLE = <span class="number">0</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_STATE_AVAILABLE = <span class="number">1</span>;
</pre></td></tr></table></figure>

<p>The last parameter <code>String device_address</code>, it&#39;s intend for device like Bluetooth which has associated address, for headset, we can just pass an empty String to it.</p>
<p>So we can do various force routing no limited to wired headset, let&#39;s get started.</p>
<h4 id="implements">Implements</h4>
<p>Here is a sample code to force route audio stream to wired headset.</p>
<p>Note there is a trick that we can&#39;t easily access <code>AudioSystem</code> since it&#39;s not exposed in Android SDK. Here we use reflection in Java, you can see from <em>line 16 ~ 20</em>.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
</pre></td><td class="code"><pre><span class="keyword">import</span> android.util.Log;
<span class="keyword">import</span> java.lang.reflect.Method;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AudioTest</span> {</span>
    <span class="keyword">private</span> <span class="keyword">final</span> String TAG = <span class="string">"AudioTest"</span>;
     <span class="comment">// Constants copied from AudioSystem</span>
    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_IN_WIRED_HEADSET    = <span class="number">0x400000</span>;
    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_OUT_EARPIECE        = <span class="number">0x1</span>;
    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_OUT_WIRED_HEADSET   = <span class="number">0x4</span>;
    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_STATE_UNAVAILABLE   = <span class="number">0</span>;
    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEVICE_STATE_AVAILABLE     = <span class="number">1</span>;

    <span class="comment">/* force route function through AudioSystem */</span>
    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setDeviceConnectionState</span>(<span class="keyword">final</span> <span class="keyword">int</span> device, <span class="keyword">final</span> <span class="keyword">int</span> state, <span class="keyword">final</span> String address) {
        <span class="keyword">try</span> {
            Class&lt;?&gt; audioSystem = Class.forName(<span class="string">"android.media.AudioSystem"</span>);
            Method setDeviceConnectionState = audioSystem.getMethod(
                    <span class="string">"setDeviceConnectionState"</span>, <span class="keyword">int</span>.class, <span class="keyword">int</span>.class, String.class);

            setDeviceConnectionState.invoke(audioSystem, device, state, address);
        } <span class="keyword">catch</span> (Exception e) {
            Log.e(TAG, <span class="string">"setDeviceConnectionState failed: "</span> + e);
        }
    }

    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title">forceRouteHeadset</span>(<span class="keyword">boolean</span> enable) {
        <span class="keyword">if</span> (enable) {
            Log.i(TAG, <span class="string">"force route to Headset"</span>);
            setDeviceConnectionState(DEVICE_IN_WIRED_HEADSET, DEVICE_STATE_AVAILABLE, <span class="string">""</span>);
            setDeviceConnectionState(DEVICE_OUT_WIRED_HEADSET, DEVICE_STATE_AVAILABLE, <span class="string">""</span>);
        } <span class="keyword">else</span> {
            Log.i(TAG, <span class="string">"force route to Earpirce"</span>);
            setDeviceConnectionState(DEVICE_IN_WIRED_HEADSET, DEVICE_STATE_UNAVAILABLE, <span class="string">""</span>);
            setDeviceConnectionState(DEVICE_OUT_WIRED_HEADSET, DEVICE_STATE_UNAVAILABLE, <span class="string">""</span>);
            setDeviceConnectionState(DEVICE_OUT_EARPIECE, DEVICE_STATE_AVAILABLE, <span class="string">""</span>);
        }
    }
}
</pre></td></tr></table></figure>

<h3 id="reference">Reference</h3>
<ol>
<li><p><a href="http://stackoverflow.com/questions/6834816/is-there-any-way-to-force-audio-through-the-speakers-when-headphones-are-plugged" target="_blank">http://stackoverflow.com/questions/6834816/is-there-any-way-to-force-audio-through-the-speakers-when-headphones-are-plugged</a></p>
</li>
<li><p><a href="http://forum.xda-developers.com/showthread.php?t=1472440" target="_blank">http://forum.xda-developers.com/showthread.php?t=1472440</a></p>
</li>
<li><p><a href="https://code.google.com/p/toggleheadset2/" target="_blank">https://code.google.com/p/toggleheadset2/</a></p>
</li>
</ol>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <time datetime="2014-12-17T03:22:25.000Z"><a href="/2014/12/17/the-story-of-mediaplayersetdatasource-[part1]/">2014-12-17</a></time>
    
    
  
    <h1 class="title"><a href="/2014/12/17/the-story-of-mediaplayersetdatasource-[part1]/">[Android] The Story of MediaPlayer.setDataSource [Part.1]</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p>Android <code>MediaPlayer</code> is a big class for all purpose media type playing, including local file and streaming playing.</p>
<p>The story start from <code>MediaPlayer.setDataSource</code>.</p>
<h2 id="-android-media-package"><code>android.media</code> package</h2>
<p><code>android.media</code> package locates in <code>frameworks/base/media</code>, and it&#39;s Java source is <code>java/android/media</code>.</p>
<p>This package provide various of interface for media playing/recording/decoding etc, including the <code>MediaPlayer</code> we are going to talk about today.</p>
<h3 id="-mediaplayer-setdatasource-"><code>MediaPlayer.setDataSource()</code></h3>
<p>I would not talk much about <code>MediaPlayer</code> constrution, the part we are insterested is what happens after calling <code>setDataSource()</code></p>
<p>From <a href="http://developer.android.com/reference/android/media/MediaPlayer.html" target="_blank">developer.android</a>, MediaPlayer provide 4 types of method reloading for <code>setDataSource</code>:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="literal">void</span> setDataSource(<span class="built_in">String</span> path)
<span class="literal">void</span> setDataSource(Context context, Uri uri, <span class="built_in">Map</span><span class="subst">&lt;</span><span class="built_in">String</span>, <span class="built_in">String</span><span class="subst">&gt;</span> headers)
<span class="literal">void</span> setDataSource(Context context, Uri uri)
<span class="literal">void</span> setDataSource(FileDescriptor fd, long offset, long length)
<span class="literal">void</span> setDataSource(FileDescriptor fd)
</pre></td></tr></table></figure>


    
  </div>
  <footer class="end-sep">
    
      
        <div class="alignleft">
          <a href="/2014/12/17/the-story-of-mediaplayersetdatasource-[part1]/#more" class="more-link">Read More</a>
        </div>
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <time datetime="2014-12-17T01:49:20.000Z"><a href="/2014/12/17/bypass-ssl-cert-check-when-connecting-to-localhost-through-https/">2014-12-17</a></time>
    
    
  
    <h1 class="title"><a href="/2014/12/17/bypass-ssl-cert-check-when-connecting-to-localhost-through-https/">[Android] Bypass SSL cert check when connecting to localhost through HTTPS</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p>最近需要用HTTPS连接到localhost做一些测试，但是发现一个SSL证书的问题， 用Android的MediaPlayer播放Https内容的时候总是失败在SSL连接握手阶段，应该是localhost证书非法，验证不了，直接导致MediaPlayer拒绝连接。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="label">javax.net.ssl.SSLProtocolException:</span> SSL handshake terminated: ssl=<span class="number">0xef44d200</span>: Failure <span class="keyword">in</span> SSL library, usually a protocol error
<span class="label">error:</span><span class="number">14094416</span>:SSL routines:SSL3_READ_BYTES:sslv3 alert certificate unknown (external/openssl/ssl/s3_pkt<span class="preprocessor">.c</span>:<span class="number">1286</span> <span class="number">0xef40c640</span>:<span class="number">0x00000003</span>)
</pre></td></tr></table></figure>

<h3 id="level-of-security">Level of Security</h3>
<p>对于连接的安全级别，可以分为下列3个级别：</p>
<ul>
<li>Level A – no encryption, no verification</li>
<li>Level B – encryption, no verification</li>
<li>Level C – encryption and verification</li>
</ul>
<p>Level A 就是相当于http连接，没有任何保护；而Level C就相当于https连接，连接加密且验证连接方。</p>
<p>而对于媒体播放的需求其实更接近于是Level B，只需要传输数据加密，不让别人知道自己看过什么，而对播放源验证不会有那么严格的要求。</p>

    
  </div>
  <footer class="end-sep">
    
      
        <div class="alignleft">
          <a href="/2014/12/17/bypass-ssl-cert-check-when-connecting-to-localhost-through-https/#more" class="more-link">Read More</a>
        </div>
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <time datetime="2014-04-30T08:33:10.000Z"><a href="/2014/04/30/[linux]-no-protocol-specified/">2014-04-30</a></time>
    
    
  
    <h1 class="title"><a href="/2014/04/30/[linux]-no-protocol-specified/">[linux] &#39;No protocol specified&#39; error</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p>今天突然所有的GUI程序都打不开了, 一直提示有</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>oneyoung:/home/oneyoung<span class="variable">$google</span><span class="attribute">-chrome</span><span class="attribute">-stable</span>
No protocol specified

(google<span class="attribute">-chrome</span><span class="attribute">-stable</span>:<span class="number">13264</span>): Gtk<span class="attribute">-WARNING</span> <span class="subst">**</span>: cannot open display: :<span class="number">0</span>
</pre></td></tr></table></figure>

<p>错误无非就两种:</p>
<ul>
<li><code>No protocol specified</code></li>
<li><code>cannot open display</code></li>
</ul>
<p>奇了怪了, 最近Arch Linux没有升级过, 也没干过神马坏事, 怎么GUI的程序全废了 T.T</p>

    
  </div>
  <footer class="end-sep">
    
      
        <div class="alignleft">
          <a href="/2014/04/30/[linux]-no-protocol-specified/#more" class="more-link">Read More</a>
        </div>
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <time datetime="2014-04-25T03:38:30.000Z"><a href="/2014/04/25/导出骑记(iridingcc)轨迹/">2014-04-25</a></time>
    
    
  
    <h1 class="title"><a href="/2014/04/25/导出骑记(iridingcc)轨迹/">导出骑记(iriding.cc)轨迹</a></h1>
  

  </header>
  
  <div class="entry">
    
      <blockquote>
<p>导出<a href="http://iriding.cc" target="_blank">骑记</a>轨迹, 保存成.gpx格式. 方便各类GPS党制作路书, 或者导入到别的平台.</p>
</blockquote>
<ul>
<li><p>依赖: <code>gpxpy</code></p>
<ul>
<li><a href="https://github.com/tkrajina/gpxpy" target="_blank">https://github.com/tkrajina/gpxpy</a></li>
<li>安装: <code>pip2 install gpxpy</code></li>
</ul>
</li>
<li><p>用法:</p>
<ul>
<li><code>./iriding2gpx.py ROUTEID</code></li>
<li>ROUTEID 是每个轨迹的ID<ul>
<li>比如这个链接: <code>http://iriding.cc/user/route/207130.shtml</code>, route id 就是207130</li>
</ul>
</li>
</ul>
</li>
</ul>

    
  </div>
  <footer class="end-sep">
    
      
        <div class="alignleft">
          <a href="/2014/04/25/导出骑记(iridingcc)轨迹/#more" class="more-link">Read More</a>
        </div>
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  

  <nav id="pagination">
  
  
    <a href="/archives/page/2/" class="next">下一页</a>
  
  <div class="clearfix"></div>
</nav>

</div>
  </div>
  <div class="widget-wrapper">
    <aside id="sidebar">
  
  
    
      
      

<div class="widget tag first">
  <h3 class="title">分类</h3>
  <ul class="entry">
  
    <li><a href="/categories/Reading/">Reading</a><small>5</small></li>
  
    <li><a href="/categories/Sports/">Sports</a><small>1</small></li>
  
    <li><a href="/categories/Tech/">Tech</a><small>18</small></li>
  
  </ul>
</div>

    
      
      

<div class="widget tag">
  <h3 class="title">标签</h3>
  <ul class="entry">
  
    <li><a href="/tags/algrithms/">algrithms</a><small>2</small></li>
  
    <li><a href="/tags/android/">android</a><small>4</small></li>
  
    <li><a href="/tags/archlinux/">archlinux</a><small>3</small></li>
  
    <li><a href="/tags/bash/">bash</a><small>3</small></li>
  
    <li><a href="/tags/django/">django</a><small>1</small></li>
  
    <li><a href="/tags/java/">java</a><small>3</small></li>
  
    <li><a href="/tags/kernel/">kernel</a><small>1</small></li>
  
    <li><a href="/tags/lighttpd/">lighttpd</a><small>1</small></li>
  
    <li><a href="/tags/mail/">mail</a><small>1</small></li>
  
    <li><a href="/tags/multimedia/">multimedia</a><small>2</small></li>
  
    <li><a href="/tags/python/">python</a><small>11</small></li>
  
    <li><a href="/tags/script/">script</a><small>5</small></li>
  
    <li><a href="/tags/vim/">vim</a><small>1</small></li>
  
    <li><a href="/tags/web/">web</a><small>4</small></li>
  
    <li><a href="/tags/读书笔记/">读书笔记</a><small>4</small></li>
  
  </ul>
</div>

    
      
      

<div class="widget tagcloud">
  <h3 class="title">标签云</h3>
  <div class="entry">
    <a href="/tags/algrithms/" style="font-size: 12.00px;">algrithms</a><a href="/tags/android/" style="font-size: 16.00px;">android</a><a href="/tags/archlinux/" style="font-size: 14.00px;">archlinux</a><a href="/tags/bash/" style="font-size: 14.00px;">bash</a><a href="/tags/django/" style="font-size: 10.00px;">django</a><a href="/tags/java/" style="font-size: 14.00px;">java</a><a href="/tags/kernel/" style="font-size: 10.00px;">kernel</a><a href="/tags/lighttpd/" style="font-size: 10.00px;">lighttpd</a><a href="/tags/mail/" style="font-size: 10.00px;">mail</a><a href="/tags/multimedia/" style="font-size: 12.00px;">multimedia</a><a href="/tags/python/" style="font-size: 20.00px;">python</a><a href="/tags/script/" style="font-size: 18.00px;">script</a><a href="/tags/vim/" style="font-size: 10.00px;">vim</a><a href="/tags/web/" style="font-size: 16.00px;">web</a><a href="/tags/读书笔记/" style="font-size: 16.00px;">读书笔记</a>
  </div>
</div>

    
  
</aside>
<div class="clearfix"></div>
  </div>
  <footer id="footer"><div class="copyright">
  
  &copy; 2014 <a href="/">oneyoung</a>
  
</div>
<div class="theme-copyright">
  Theme by <a href="https://github.com/orderedlist" target="_blank">orderedlist</a>
   | 
  Redesign by <a href="http://heroicyang.com/" target="_blank">Heroic Yang</a>
</div>
<div class="clearfix"></div></footer>
  <script src="/js/scale.fix.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<script type="text/javascript">
  var duoshuoQuery = { short_name: 'oneyoung' };
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';
    ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
  (function($){
    $('.fancybox').fancybox();
  })(jQuery);
</script>

</body>
</html>